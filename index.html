<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esfera de Nodos</title>

  <!-- ================= CSS EMBEBIDO ================= -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      color: #fff;
      background-image: url("fondo01.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .header {
      display: grid;
      grid-template-columns: 1fr 3fr 1fr;
      height: 120px;
      align-items: center;
    }

    .header-col {
      padding: 10px;
    }

    .header img {
      max-height: 80px;
    }

    .logo {
      max-width: 200px;
    }

    .center {
      text-align: center;
    }

    .right {
      display: grid;
      grid-template-rows: 1fr 1fr;
    }

    .main {
      display: grid;
      grid-template-columns: 3fr 1fr;
      height: calc(100vh - 120px);
    }

    .canvas-container {
      position: relative;
    }

    #sphereCanvas {
      width: 100%;
      height: 100%;
    }

    #infoPanel {
      position: absolute;
      top: 120px;
      left: 20px;
      width: 260px;
      background: rgba(20,20,20,0.6);
      padding: 15px;
      border: 2px solid rgba(0,255,255,0.4);
      border-radius: 12px;
      max-height: 70%;
      overflow-y: auto;
    }

    #infoPanel a {
      color: cyan;
      text-decoration: none;
    }

    .sidebar {
      padding: 15px;
      z-index: 10;
    }

    .sidebar a {
      color: #aaa;
      text-decoration: none;
    }

    @media (max-width: 768px) {
      .main {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
<!-- ================= HEADER ================= -->
<header class="header">

  <!-- Columna izquierda (1/4) -->
  <div class="header-col left">
    <img src="legos.png" alt="Logo" class="logo">
  </div>

  <!-- Columna centro (2/4) -->
  <div class="header-col center">
    <h1>BUILDER AND DEVELOPER OF IDEAS</h1>
  </div>

  <!-- Columna derecha (1/4, 2 filas) -->
  <div class="header-col right">
    <div class="right-top">
      <img src="fotito.gif" alt="AnimaciÃ³n">
    </div>
    <div class="right-bottom">
      <!-- Ejemplo de script simple -->

         <!-- aquÃ­ lo el codigo embebido --> 
      <script>
    /**Autotype */
var TxtType = function(el, toRotate, period) {
    this.toRotate = toRotate;
    this.el = el;
    this.loopNum = 0;
    this.period = parseInt(period, 10) || 2000;
    this.txt = "";
    this.tick();
    this.isDeleting = false;
  };
  
  TxtType.prototype.tick = function() {
    var i = this.loopNum % this.toRotate.length;
    var fullTxt = this.toRotate[i];
  
    if (this.isDeleting) {
      this.txt = fullTxt.substring(0, this.txt.length - 1);
    } else {
      this.txt = fullTxt.substring(0, this.txt.length + 1);
    }
  
    this.el.innerHTML = '<span class="wrap">' + this.txt + "<\/span>";
  
    var that = this;
    var delta = 200 - Math.random() * 100;
  
    if (this.isDeleting) {
      delta /= 3;
    }
  
    if (!this.isDeleting && this.txt === fullTxt) {
      delta = this.period;
      this.isDeleting = true;
    } else if (this.isDeleting && this.txt === "") {
      this.isDeleting = false;
      this.loopNum++;
      delta = 500;
    }
  
    setTimeout(function() {
      that.tick();
    }, delta);
  };
  
  window.onload = function() {
    var elements = document.getElementsByClassName("typewrite");
    for (var i = 0; i < elements.length; i++) {
      var toRotate = elements[i].getAttribute("data-type");
      var period = elements[i].getAttribute("data-period");
      if (toRotate) {
        new TxtType(elements[i], JSON.parse(toRotate), period);
      }
    }
    // INJECT CSS
    var css = document.createElement("style");
    css.type = "text/css";
    css.innerHTML = ".typewrite > .wrap { font-size:20px; border-right: 0.08em solid #2bbc8a;}";
    document.body.appendChild(css);
  };
    
</script>

     
<a style="color:rgba(255, 255, 255, 1.5); font-size:10px; font-family: 'Arial', sans-serif" class="typewrite" data-period="1000" data-type="[ &quot;Hello World!&nbsp;&quot;, &quot;my name is Francisco&nbsp;&quot;, &quot;and&nbsp;&quot;, &quot;im always learning&nbsp;&quot;, &quot;and I have always offered my services&nbsp;&quot;, &quot;to solve different aspects&nbsp;&quot;, &quot;You probably already have&nbsp;&quot;, &quot;your own network of contacts,&nbsp;&quot;, &quot;but interconnection&nbsp;&quot;, &quot;is always a&nbsp;&quot;, &quot;good thing.!&nbsp;&quot;, &quot;I hope you can find what you are looking for&nbsp;&quot;,&quot;and thanks for watching&nbsp;&quot;, &quot;falart3.42web.io&nbsp;&quot;, &quot;á’¡â—¯áµ”â—¯á’¢&nbsp;&quot;, &quot;... ;)&nbsp;&quot;]"><span class="wrap"></span></a>
        
      <span id="clock"></span>
    </div>
  </div>

</header>

<!-- ================= MAIN ================= -->
<main class="main">

  <!-- Panel textual izquierdo (3/4) -->
  <section class="canvas-container">

    <!-- Panel de informaciÃ³n -->
    <aside id="infoPanel">
      <h2 id="infoTitle">Nodo</h2>
      <p id="infoText">Selecciona un nodo.</p>
      <a id="infoLink" href="#" target="_blank">Ir al enlace</a>
    </aside>

    <!-- Canvas -->
    <canvas id="sphereCanvas"></canvas>

  </section>

  <!-- Columna derecha (1/4) -->
  <aside class="sidebar">
      
    <ul>
        <!-- UI encima del canvas -->
        <div id="histats_counter">

        </div>
                
      <li><a href="#">Enlace 1</a></li>
      <li><a href="#">Enlace 2</a></li>
        
      <a href="#"><div id="cc-m-7779832651" class="j-module n j-htmlCode "><!-- Elfsight AI Chatbot | Untitled AI Chatbot -->
<script src="https://elfsightcdn.com/platform.js" async="async"></script>
<div class="elfsight-app-4324eccc-a774-42b7-bb41-e7e365d7d6df" data-elfsight-app-lazy="">
</div></div></a>

        
    </ul>
  </aside>

</main>

<!-- ================= JS EMBEBIDO ================= -->
<script>
// ROTACIÃ“N AUTOMÃTICA (siempre activa)
let autoRotX = 0.002;
let autoRotY = 0.003;
let autoRotZ = 0.001;

// ROTACIÃ“N MANUAL (drag / touch)
let dragRotX = 0;
let dragRotY = 0;


/* ================= CANVAS ================= */
const canvas = document.getElementById("sphereCanvas");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}
window.addEventListener("resize", resize);
resize();

/* ================= CONFIG ================= */
const RADIUS = 220;
const DEPTH = 900;

let rotX = 0;
let rotY = 0;
let velX = 0;
let velY = 0;
let dragging = false;
let lastX = 0;
let lastY = 0;

let selectedNode = null;

/* ================= DATOS DE NODOS ================= */
const nodeData = [
  {
    img: "fotito.gif",
    title: "Who I'm I?",
    text: "Sometimes I ask myself. Although we live in a changing world, I know I'm part of the change. And thanks to the problems and my experiences, I grow positively every day. I believe that problems are like fuel for solutions...",
    link: "https://example.com"
  },
  {
    img: "fal.png",
    title: "Fal Art",
    text: "Obras de Arte",
    link: "https://falart.jimdofree.com/"
  },
  {
    img: "blue.png",
    title: "Blue Print",
    text: "Este nodo representa los planos en 2D y 3D.",
    link: "https://falart.jimdofree.com/portfolio/architecture/"
  },
  {
    img: "3n.png",
    title: "3N Tegelzetter",
    text: "Este nodo representa las instalaciones de azulejos.",
    link: "https://www.facebook.com/people/3N-tegelzetter/100040099371380/"
  },
  {
    img: "deve.png",
    title: "Developer",
    text: "Este nodo representa los codigos y programas.",
    link: "https://github.com/falart3?tab=repositories"
  },
  {
    img: "insta.png",
    title: "Intagram",
    text: "Este nodo representa otra conexion mas.",
    link: "https://www.instagram.com/francisco.lopez.art/?hl=es"
  },
  {
    img: "face.png",
    title: "FacebookIntagram",
    text: "Este nodo representa otra conexion mas.",
    link: "https://www.facebook.com/people/Francisco-Lopez/1552539529/"
  },
      { img: "wtsaap.png",
    title: "Whatsaap",
    text: "Este nodo representa otra conexion mas."
  },
  {
    img: "yout.png",
    title: "YouTube",
    text: "Canal de videos",
    link: "https://www.youtube.com/user/falarte"
  },
  { img: "blog.png",
    title: "Blog",
    text: "Este nodo representa otra conexion mas.",
    link: "http://falart.blogspot.com/"
  },
      {
    img: "lin.png",
    title: "Linkedin",
    text: "Este nodo representa otra conexion mas.",
    link: "https://www.linkedin.com/in/francisco-lopez-a5b67326"
  }    
];

/* ================= CREAR ESFERA ================= */
 const nodes = nodeData.map((data, i) => {
  const phi = Math.acos(1 - 2 * (i + 0.5) / nodeData.length);
  const theta = Math.PI * (1 + Math.sqrt(5)) * i;

  const img = new Image();
  img.src = data.img;

  return {
    x: RADIUS * Math.cos(theta) * Math.sin(phi),
    y: RADIUS * Math.sin(theta) * Math.sin(phi),
    z: RADIUS * Math.cos(phi),
    img,
    data
  };
});

/* ================= PROYECCIÃ“N ================= */
function project(n) {
  const scale = DEPTH / (DEPTH + n.z);
  return {
    x: n.x * scale + canvas.width / 2 + 150, // centra la esfera,
    y: n.y * scale + canvas.height / 2 - 50, // sube la esfera,
    scale
  };
}


/* ================= ROTACIONES ================= */
function rotateX(n, a) {
  const c = Math.cos(a), s = Math.sin(a);
  const y = n.y * c - n.z * s;
  const z = n.y * s + n.z * c;
  n.y = y; n.z = z;
}

function rotateY(n, a) {
  const c = Math.cos(a), s = Math.sin(a);
  const x = n.x * c - n.z * s;
  const z = n.x * s + n.z * c;
  n.x = x; n.z = z;
}

/* ================= DIBUJO ================= */
function draw() {
    // Inicializamos la rotaciÃ³n automÃ¡tica como 0
    let autoRotX = 0;
    let autoRotY = 0;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Aplica rotaciÃ³n automÃ¡tica
  rotX += autoRotX;
  rotY += autoRotY;

  nodes.forEach(n => {
      // Aplica tanto rotaciÃ³n automÃ¡tica como manual (drag)
    rotateX(n, velX + autoRotX);
    rotateY(n, velY + autoRotY);
  });

    // FricciÃ³n solo sobre la rotaciÃ³n manual
  velX *= 0.98;
  velY *= 0.98;;
  autoRotX *= 1.85; // fricciÃ³n mÃ¡s lenta para rotaciÃ³n automÃ¡tica
  autoRotY *= 1.85;

  
  if (selectedNode) {
  drawInfoPanel(selectedNode);
}  


  // HILOS
  ctx.strokeStyle = "rgba(255,255,255,0.15)";
  nodes.forEach(a => {
    const pa = project(a);
    nodes.forEach(b => {
      const pb = project(b);
      ctx.beginPath();
      ctx.moveTo(pa.x, pa.y);
      ctx.lineTo(pb.x, pb.y);
      ctx.stroke();
    });
  });

  // NODOS
  nodes.forEach(n => {
    const p = project(n);
    n.sx = p.x;
    n.sy = p.y;

    const size = 28 * p.scale;

    ctx.save();
    ctx.beginPath();
    ctx.arc(p.x, p.y, size, 0, Math.PI * 2);
    ctx.clip();
    ctx.drawImage(n.img, p.x - size, p.y - size, size * 2, size * 2);
    ctx.restore();

    if (n === selectedNode) {
      ctx.strokeStyle = "yellow";
      ctx.lineWidth = 3;
      ctx.stroke();
    }
  });

  requestAnimationFrame(draw);
}
draw();

/* ================= INTERACCIÃ“N ================= */
canvas.addEventListener("mousedown", e => {
  dragging = true;
  lastX = e.clientX;
  lastY = e.clientY;
});

window.addEventListener("mouseup", () => dragging = false);

window.addEventListener("mousemove", e => {
  if (!dragging) return;
  velY = (e.clientX - lastX) * 0.002;
  velX = (e.clientY - lastY) * 0.002;
  lastX = e.clientX;
  lastY = e.clientY;

      // hacemos que la rotaciÃ³n automÃ¡tica siga la direcciÃ³n del drag
  autoRotX = velX;
  autoRotY = velY;

  lastX = e.clientX;
  lastY = e.clientY;
});



/* ================= CLICK ================= */
canvas.addEventListener("click", e => {
  const r = canvas.getBoundingClientRect();
  const x = e.clientX - r.left;
  const y = e.clientY - r.top;

  selectedNode = null;

  nodes.forEach(n => {
    const dx = x - n.sx;
    const dy = y - n.sy;
    if (Math.hypot(dx, dy) < 30) {
      selectedNode = n;
      showPanel(n);
    }
  });
});

/* ================= PANEL HTML ================= */
function showPanel(node) {
  const panel = document.getElementById("infoPanel");
    // Datos
  document.getElementById("infoTitle").innerText = node.data.title;
  document.getElementById("infoText").innerText = node.data.text;
  document.getElementById("infoLink").href = node.data.link;

  panel.classList.remove("hidden");

}


/* ================= HILO PANEL ================= */
function drawThread(node, panelAnchorX, panelAnchorY) {
  const p = project(node);

  ctx.save();
  ctx.strokeStyle = "rgba(0,255,255,0.6)";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(p.x, p.y);

  ctx.lineTo(panelAnchorX, panelAnchorY);
    
  ctx.stroke();
  ctx.restore();
}

function drawInfoPanel(node) {

    const panel = document.getElementById("infoPanel");
    if (!panel) return;
    const p = project(node);


    // PosiciÃ³n del panel HTML
const rect = panel.getBoundingClientRect();
const canvasRect = canvas.getBoundingClientRect();
    
  const panelX = 20; 
  const panelY = canvas.height / 2 - 300;
  const panelW = 260;
  const panelH = 180;

  const anchorX = panelX + panelW;
  const anchorY = panelY + panelH;


  // ðŸ§µ HILO
drawThread(node, anchorX, anchorY); 

  // ðŸ“¦ PANEL
 /*
  ctx.save();
  ctx.fillStyle = "rgba(10,10,10,0.55)";
  ctx.strokeStyle = "rgba(0,255,255,0.4)";
  ctx.lineWidth = 1.5;

  ctx.beginPath();
  ctx.roundRect(panelX, panelY, panelW, panelH, 16);
  ctx.fill();
  ctx.stroke();

  // ðŸ“ TEXTO
  ctx.fillStyle = "#fff";
  ctx.font = "bold 14px sans-serif";
  ctx.fillText(node.data.text, panelX + 16, panelY + 32);

  ctx.font = "13px sans-serif";
  ctx.fillText("Click para abrir enlace", panelX + 16, panelY + 60);

  ctx.restore();
  */
}


</script>

</body>
</html>
