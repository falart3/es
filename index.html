<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Esfera de Nodos</title>

  <!-- ================= CSS EMBEBIDO ================= -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      color: gold;
      background-image: url("fondo01.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      min-height: 100vh;
      overflow-x: hidden;

        cursor: none;
    }

        /* Cursor personalizado */
  #custom-cursor {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: radial-gradient(circle, #38bdf8, #0ea5e9);
    position: fixed;
    pointer-events: none;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 15px rgba(56, 189, 248, 0.8);
    transition: transform 0.08s ease-out;
    z-index: 9999;
  }

   /* Zona inferior */
  #magic-zone {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 80%; /* pantalla */
    pointer-events: none;
    overflow: hidden;
    z-index: 1;
  }

  .star {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(255, 215, 128, 0.5),
      rgba(255, 200, 80, 0.2),
      rgba(255, 200, 80, 0.02)
   
    );
    animation: drift linear infinite;
  }

  @keyframes drift {
    from { transform: translate(0, 0); }
    to { transform: translate(var(--dx), var(--dy));  }
  }
      
      /* web */
    .header {
      display: grid;
      grid-template-columns: 1fr 3fr 1fr;
      height: 120px;
      align-items: center;
    }

    .header-col { padding: 10px; }

    .header img { max-height: 80px; }

    .logo { max-width: 200px; }

    .center { text-align: center; }

    .right { display: grid; grid-template-rows: 1fr 1fr; }

    .main { 
	  display: grid;
      grid-template-columns: 3fr 1fr;
      height: calc(100vh - 120px);
    }

    .canvas-container {
      position: relative;
		z-index: 1;  /* Canvas debajo del panel solo visualmente, pero recibe eventos */
    }

    #sphereCanvas {
      width: 100%;
      height: 100%;
    }

    #infoPanel {
      position: absolute;
      top: 120px;
      left: 20px;
      width: 260px;
      background: rgba(20,20,20,0.6);
      padding: 15px;
      border: 2px solid rgba(212,175,55,0.4); /* dorado */
      border-radius: 25px;
      max-height: 70%;
      overflow-y: auto;
    }

    #infoPanel a {
      color: gold;
      text-decoration: none;
    }

    #histats_counter{
      color: gold;
      text-decoration: none;
    }
        
    .sidebar {
      padding: 15px;
      z-index: 10;
    }

    .sidebar a {
      color: gold;
      text-decoration: none;
    }

      /* MOVIL */
@media (max-width: 768px) {
  /*body { cursor: default; }*/
  /* Header mÃ¡s compacto */
  .header {
    display: flex;
    flex-direction: column;
    height: auto;
    text-align: center;
    gap: 6px;
    /*padding: 10px 0;*/
  }

   .header img { max-height: 60px; }
   .header h1 { font-size: 14px; }
   .logo { max-width: 120px; }

  /* Main en una sola columna */
  .main {
    grid-template-columns: 1fr;
    display: flex;
    flex-direction: column;
    height: auto;
  }

  /* Panel abajo */
  #infoPanel {
    /*background: rgba(20,20,20,0.6);*/
    border: 2px solid rgba(212,175,55,0.4); /* dorado */
    position: absulute;
    width: 80%;
	height: auto;
    max-width: none;
    left: 0;
    top: 0;
    transform: none;
    order: 2;
	z-index: 2;
    border-radius: 18px;
   	}

  /*canvas { touch-action: auto; }*/
         /* CANVAS */
  .canvas-container {
    width: 100%;
    height: 100hv; /* altura */
    order: 1;
	z-index: 1;
    flex-shrink: 0;
    /*position: relative;*/
	position: center;
	}
    
	#sphereCanvas {
    width: 100%;
    height: 100%;
	position: center;
  }
       /* SIDEBAR */
  .sidebar {
    display: block;
    order: 3;
    padding: 10px;
	z-index: 2;
  }

  .sidebar ul {
    padding-left: 0;
  }

  .sidebar li {
    list-style: none;
    margin-bottom: 8px;
    text-align: center;
  }

  /* HIDE COSMETIC */
  #custom-cursor,
  #magic-zone {
    display: none;
  }
}

  </style>
</head>

<body>
    <div id="custom-cursor"></div>
    <div id="magic-zone"></div>

<!-- ================= HEADER ================= -->
<header class="header">

  <!-- Columna izquierda (1/4) -->
  <div class="header-col left">
    <img src="legos.png" alt="Logo" class="logo">
  </div>

  <!-- Columna centro (2/4) -->
  <div class="header-col center">
    <h1>BUILDER AND DEVELOPER OF IDEAS</h1>
  </div>

  <!-- Columna derecha (1/4, 2 filas) -->
  <div class="header-col right">
    <div class="right-top">
      <img src="fotito.gif" alt="AnimaciÃ³n">
    </div>
    <div class="right-bottom">
      <!-- Ejemplo de script simple -->

         <!-- aquÃ­ lo el codigo embebido --> 
      <script>
    /**Autotype */
var TxtType = function(el, toRotate, period) {
    this.toRotate = toRotate;
    this.el = el;
    this.loopNum = 0;
    this.period = parseInt(period, 10) || 2000;
    this.txt = "";
    this.tick();
    this.isDeleting = false;
  };
  
  TxtType.prototype.tick = function() {
    var i = this.loopNum % this.toRotate.length;
    var fullTxt = this.toRotate[i];
  
    if (this.isDeleting) {
      this.txt = fullTxt.substring(0, this.txt.length - 1);
    } else {
      this.txt = fullTxt.substring(0, this.txt.length + 1);
    }
  
    this.el.innerHTML = '<span class="wrap">' + this.txt + "<\/span>";
  
    var that = this;
    var delta = 200 - Math.random() * 100;
  
    if (this.isDeleting) {
      delta /= 3;
    }
  
    if (!this.isDeleting && this.txt === fullTxt) {
      delta = this.period;
      this.isDeleting = true;
    } else if (this.isDeleting && this.txt === "") {
      this.isDeleting = false;
      this.loopNum++;
      delta = 500;
    }
  
    setTimeout(function() {
      that.tick();
    }, delta);
  };
  
  window.onload = function() {
    var elements = document.getElementsByClassName("typewrite");
    for (var i = 0; i < elements.length; i++) {
      var toRotate = elements[i].getAttribute("data-type");
      var period = elements[i].getAttribute("data-period");
      if (toRotate) {
        new TxtType(elements[i], JSON.parse(toRotate), period);
      }
    }
    // INJECT CSS
    var css = document.createElement("style");
    css.type = "text/css";
    css.innerHTML = ".typewrite > .wrap { font-size:20px; border-right: 0.08em solid #2bbc8a;}";
    document.body.appendChild(css);
  };
    
</script>

     
<a style="color:rgba(212,175,55,0.9); font-size:10px; font-family: 'Arial', sans-serif" class="typewrite" data-period="1000" data-type="[ &quot;Hello World!&nbsp;&quot;, &quot;my name is Francisco&nbsp;&quot;, &quot;and&nbsp;&quot;, &quot;im always learning&nbsp;&quot;, &quot;and I have always offered my services&nbsp;&quot;, &quot;to solve different aspects&nbsp;&quot;, &quot;You probably already have&nbsp;&quot;, &quot;your own network of contacts,&nbsp;&quot;, &quot;but interconnection&nbsp;&quot;, &quot;is always a&nbsp;&quot;, &quot;good thing.!&nbsp;&quot;, &quot;I hope you can find what you are looking for&nbsp;&quot;,&quot;and thanks for watching&nbsp;&quot;, &quot;falart3.42web.io&nbsp;&quot;, &quot;á’¡â—¯áµ”â—¯á’¢&nbsp;&quot;, &quot;... ;)&nbsp;&quot;]"><span class="wrap"></span></a>
        
      <span id="clock"></span>
    </div>
  </div>

</header>

<!-- ================= MAIN ================= -->
<main class="main">

  <!-- Panel textual izquierdo (3/4) -->
  <section class="canvas-container">

    <!-- Panel de informaciÃ³n -->
    <aside id="infoPanel">
      <h2 id="infoTitle">Nodes</h2><br>
      <p id="infoText">Select a node</p><br>
      <a id="infoLink" href="#" target="_blank"><h1>â†’</h1></a>
    </aside>

    <!-- Canvas -->
    <canvas id="sphereCanvas"></canvas>

  </section>

  <!-- Columna derecha (1/4) -->
  <aside class="sidebar">
      
    <ul>
         <!--             
      <li><a href="#">Enlace 1</a></li>
      <li><a href="#">Enlace 2</a></li>
         -->

<!-- Saludo -->
<script LANGUAGE="JavaScript"> 
	var dt = new Date();
	var hr = dt.getHours();
	var msg = ((hr<12) ? "Good morning" :"Good evening");
	msg = ((hr>11)&&(hr<19) ? "Good afternoon" : msg);
	msg=" <H2> "+msg+" !</H2>";
	document.write(msg); 
</script> 
        
      <!-- Histats.com  (div with counter) --><div id="histats_counter" ></div>

            <!--************CODE GEOCOUNTER************-->
    <script type="text/javascript" src="https://geoloc14.geostats.ovh/private/geocounter.js?compte=604337947965" style="background-color:#FF0000;" ></script> <noscript><a href="http://www.geovisites.com/es/directory/arte_artistas.php?compte=604337947965" target="_blank"><img src="https://geoloc14.geostats.ovh/private/geocounter.php?compte=604337947965" border="0" style="background-color:#FF0000;" alt="artistas"/></a><br/>
    Please do not change this code for a perfect fonctionality of your counter <a href="http://www.geovisites.com/es/directory/arte_artistas.php">artistas</a></noscript><br/>
<!--************END CODE GEOCOUNTER************-->
  
        
      <a href="#"><div id="cc-m-7779832651" class="j-module n j-htmlCode "><!-- Elfsight AI Chatbot | Untitled AI Chatbot -->
<script src="https://elfsightcdn.com/platform.js" async="async"></script>
<div class="elfsight-app-4324eccc-a774-42b7-bb41-e7e365d7d6df" data-elfsight-app-lazy="">
</div></div></a>

        
    </ul>
  </aside>

</main>

<!-- ================= JS EMBEBIDO ================= -->
<script>
// ROTACIÃ“N AUTOMÃTICA (siempre activa)
let autoRotX = 0.002;
let autoRotY = 0.003;
let autoRotZ = 0.001;

// ROTACIÃ“N MANUAL (drag / touch)
let dragRotX = 0;
let dragRotY = 0;


/* ================= CANVAS ================= */
const canvas = document.getElementById("sphereCanvas");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = canvas.clientWidth;
  canvas.height = canvas.clientHeight;
}
window.addEventListener("resize", resize);
resize();

/* ================= CONFIG ================= */

    /* ====radio====*/
const RADIUS = 220;
    

    /*resto*/
const DEPTH = 900;

let rotX = 0;
let rotY = 0;
let velX = 0;
let velY = 0;
let dragging = false;
let lastX = 0;
let lastY = 0;

let selectedNode = null;

/* ================= DATOS DE NODOS ================= */
const nodeData = [
  {
    img: "fotito.png",
    title: "Who I'm I?",
    text: "Sometimes I ask myself. Although we live in a changing world, I know I'm part of the change. And thanks to the problems and my experiences, I grow positively every day. I believe that problems are like fuel for solutions...",
    link: "https://example.com"
  },
  {
    img: "fal.png",
    title: "Fal Art",
    text: "This node will take you to the site I built when I dedicated myself more to illustration and professional comics.",
    link: "https://falart.jimdofree.com/"
  },
  {
    img: "blue.png",
    title: "Blue Print",
    text: "Here you will find work on plans, projections, and 3D representations for design and architecture.",
    link: "https://falart.jimdofree.com/portfolio/architecture/"
  },
  {
    img: "3n.png",
    title: "3N Tegelzetter",
    text: "This is my latest venture in the construction industry, offering tiling solutions. I started in the USA, then in Spain. Currently, I'm based in the Netherlands.",
    link: "https://www.facebook.com/people/3N-tegelzetter/100040099371380/"
  },
  {
    img: "deve.png",
    title: "Developer",
    text: "This node represents some small examples of the codes and programs.",
    link: "https://github.com/falart3?tab=repositories"
  },
  {
    img: "insta.png",
    title: "Instagram",
    text: "",
    link: "https://www.instagram.com/francisco.lopez.art/?hl=es"
  },
  {
    img: "face.png",
    title: "Facebook",
    text: "",
    link: "https://www.facebook.com/people/Francisco-Lopez/1552539529"
  },
  {
    img: "wtsaap.png",
    title: "Whatsaap",
    text: "",
    link: "https://wa.me/34603209530?text=Hello,%20I'm%20writing%20to%20you%20from%20the%20web"
  },
  {
    img: "yout.png",
    title: "YouTube",
    text: "",
    link: "https://www.youtube.com/user/falarte"
  },
  { img: "blog.png",
    title: "Blog",
    text: "In this node, from a blog from 2008, you will find my fifth site since I started posting things on the internet, and some early attempts in the paths of drawing and art.",
    link: "http://falart.blogspot.com"
  },
  {
    img: "lin.png",
    title: "Linkedin",
    text: "",
    link: "https://www.linkedin.com/in/francisco-lopez-a5b67326"
  }    
];

/* ================= CREAR ESFERA ================= */
 const nodes = nodeData.map((data, i) => {
  const phi = Math.acos(1 - 2 * (i + 0.5) / nodeData.length);
  const theta = Math.PI * (1 + Math.sqrt(5)) * i;

  const img = new Image();
  img.src = data.img;

  return {
    x: RADIUS * Math.cos(theta) * Math.sin(phi),
    y: RADIUS * Math.sin(theta) * Math.sin(phi),
    z: RADIUS * Math.cos(phi),
    img,
    data
  };
});

/* ================= PROYECCIÃ“N ================= */
function project(n) {
  const scale = DEPTH / (DEPTH + n.z);
  return {
    x: n.x * scale + canvas.width / 2 + 150, // centra la esfera,
    y: n.y * scale + canvas.height / 2 - 50, // sube la esfera,
    scale
  };
}


/* ================= ROTACIONES ================= */
function rotateX(n, a) {
  const c = Math.cos(a), s = Math.sin(a);
  const y = n.y * c - n.z * s;
  const z = n.y * s + n.z * c;
  n.y = y; n.z = z;
}

function rotateY(n, a) {
  const c = Math.cos(a), s = Math.sin(a);
  const x = n.x * c - n.z * s;
  const z = n.x * s + n.z * c;
  n.x = x; n.z = z;
}

/* ================= DIBUJO ================= */
function draw() {
   // Inicializamos la rotaciÃ³n automÃ¡tica como 0
    let autoRotX = 0.0009;
    let autoRotY = 0.0008;
    let autoRotZ = 0.0007;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Aplica rotaciÃ³n automÃ¡tica
  rotX += autoRotX;
  rotY += autoRotY;

  nodes.forEach(n => {
      // Aplica tanto rotaciÃ³n automÃ¡tica como manual (drag)
    rotateX(n, velX + autoRotX);
    rotateY(n, velY + autoRotY);
  });

    // FricciÃ³n solo sobre la rotaciÃ³n manual
  velX *= 0.98;
  velY *= 0.98;;
  autoRotX *= 1.85; // fricciÃ³n mÃ¡s lenta para rotaciÃ³n automÃ¡tica
  autoRotY *= 1.85;

  
  if (selectedNode) {
  drawInfoPanel(selectedNode);
}  


  // HILOS
  ctx.strokeStyle = "rgba(212,175,155,0.4)"; //dorado
  nodes.forEach(a => {
    const pa = project(a);
    nodes.forEach(b => {
      const pb = project(b);
      ctx.beginPath();
      ctx.moveTo(pa.x, pa.y);
      ctx.lineTo(pb.x, pb.y);
      ctx.stroke();
    });
  });

  // NODOS
  nodes.forEach(n => {
    const p = project(n);
    n.sx = p.x;
    n.sy = p.y;

    const size = 28 * p.scale;

    ctx.save();
    ctx.beginPath();
    ctx.arc(p.x, p.y, size, 0, Math.PI * 2);
    ctx.clip();
    ctx.drawImage(n.img, p.x - size, p.y - size, size * 2, size * 2);
    ctx.restore();

    if (n === selectedNode) {
      ctx.strokeStyle = "yellow";
      ctx.lineWidth = 1;
      ctx.stroke();
    }
  });

  requestAnimationFrame(draw);
}
draw();

/* ================= INTERACCIÃ“N ================= */
canvas.addEventListener("mousedown", e => {
  dragging = true;
  lastX = e.clientX;
  lastY = e.clientY;
});

window.addEventListener("mouseup", () => dragging = false);

window.addEventListener("mousemove", e => {
  if (!dragging) return;
  velY = (e.clientX - lastX) * 0.002;
  velX = (e.clientY - lastY) * 0.002;
  lastX = e.clientX;
  lastY = e.clientY;

      // hacemos que la rotaciÃ³n automÃ¡tica siga la direcciÃ³n del drag
  autoRotX = velX;
  autoRotY = velY;

  lastX = e.clientX;
  lastY = e.clientY;
});


    /* ========== dedo ========= */

canvas.addEventListener("touchstart", e => {
  dragging = true;
  const t = e.touches[0];
  lastX = t.clientX;
  lastY = t.clientY;
});

canvas.addEventListener("touchmove", e => {
  if (!dragging) return;
  const t = e.touches[0];
  velY = (t.clientX - lastX) * 0.002;
  velX = (t.clientY - lastY) * 0.002;
  lastX = t.clientX;
  lastY = t.clientY;
});

canvas.addEventListener("touchend", () => dragging = false);

    


/* ================= CLICK ================= */
canvas.addEventListener("click", e => {
  const r = canvas.getBoundingClientRect();
  const x = e.clientX - r.left;
  const y = e.clientY - r.top;

  selectedNode = null;

  nodes.forEach(n => {
    const dx = x - n.sx;
    const dy = y - n.sy;
    if (Math.hypot(dx, dy) < 30) {
      selectedNode = n;
      showPanel(n);
    }
  });
});

/* ================= PANEL HTML ================= */
function showPanel(node) {
  const panel = document.getElementById("infoPanel");
    // Datos
  document.getElementById("infoTitle").innerText = node.data.title;
  document.getElementById("infoText").innerText = node.data.text;
  document.getElementById("infoLink").href = node.data.link;

  panel.classList.remove("hidden");

}


/* ================= HILO PANEL ================= */
function drawThread(node, panelAnchorX, panelAnchorY) {
  const p = project(node);

  ctx.save();
  ctx.strokeStyle = "rgba(212,175,155,0.4)";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(p.x, p.y);

  ctx.lineTo(panelAnchorX, panelAnchorY);
    
  ctx.stroke();
  ctx.restore();
}

function drawInfoPanel(node) {

    const panel = document.getElementById("infoPanel");
    if (!panel) return;
    const p = project(node);


    // PosiciÃ³n del panel HTML
const rect = panel.getBoundingClientRect();
const canvasRect = canvas.getBoundingClientRect();
    
  const panelX = 20; 
  const panelY = canvas.height / 2 - 300;
  const panelW = 260;
  const panelH = 180;
    
// ðŸ‘‰ centro del lado derecho del panel
 // const anchorX = panelX + panelW;
    const anchorX = rect.right - canvasRect.left;
 // const anchorY = panelY + panelH;
    const anchorY = rect.top - canvasRect.top + rect.height / 2;


  // ðŸ§µ HILO
drawThread(node, anchorX, anchorY); 


    //radio
    let RADIUS = 220;

function updateRadius() {
  if (window.innerWidth < 768) {
    RADIUS = Math.min(window.innerWidth, window.innerHeight) * 0.28;
  } else {
    RADIUS = 220;
  }

  nodes.forEach((n, i) => {
    const phi = Math.acos(1 - 2 * (i + 0.5) / nodes.length);
    const theta = Math.PI * (1 + Math.sqrt(5)) * i;

    n.x = RADIUS * Math.cos(theta) * Math.sin(phi);
    n.y = RADIUS * Math.sin(theta) * Math.sin(phi);
    n.z = RADIUS * Math.cos(phi);
  });
}

window.addEventListener("resize", updateRadius);
updateRadius();


}


</script>

    <!-- Histats.com  START  (aync)-->
<script type="text/javascript">var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,4695599,4,29,115,60,00011111']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
hs.src = 'https://s10.histats.com/js15_as.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
})();</script>
<noscript><a href="/" target="_blank"><img  src="https://sstatic1.histats.com/0.gif?4695599&101" alt="contadores" border="0"></a></noscript>
<!-- Histats.com  END  -->


     <!-- cursor-->
    <script>
  const cursor = document.getElementById("custom-cursor");

  document.addEventListener("mousemove", (e) => {
    cursor.style.left = e.clientX + "px";
    cursor.style.top = e.clientY + "px";
  });

  // Efecto hover en links
  document.querySelectorAll("a").forEach(link => {
    link.addEventListener("mouseenter", () => {
      cursor.style.transform = "translate(-50%, -50%) scale(1.8)";
    });
    link.addEventListener("mouseleave", () => {
      cursor.style.transform = "translate(-50%, -50%) scale(1)";
    });
  });
</script>

    <script>
  let lastX = 0, lastY = 0;

  document.addEventListener("mousemove", (e) => {
    lastX += (e.clientX - lastX) * 0.15;
    lastY += (e.clientY - lastY) * 0.15;
    cursor.style.left = lastX + "px";
    cursor.style.top = lastY + "px";
  });
</script>

      <!-- zona magica -->
<script>
  const zone = document.getElementById("magic-zone");

  const layers = [
    { count: 12, size: [22, 30], speed: [18, 26], blur: 0 },
    { count: 18, size: [12, 20], speed: [30, 45], blur: 1 },
    { count: 25, size: [6, 10],  speed: [50, 70], blur: 2 }
  ];

  layers.forEach(layer => {
    for (let i = 0; i < layer.count; i++) {
      const star = document.createElement("div");
      star.className = "star";

      const size = rand(layer.size[0], layer.size[1]);
      const duration = rand(layer.speed[0], layer.speed[1]);

      star.style.width = size + "px";
      star.style.height = size + "px";
      star.style.left = rand(0, 100) + "%";
      star.style.top = rand(0, 100) + "%";
      star.style.filter = `blur(${layer.blur}px)`;

      const dx = rand(-120, 120);
      const dy = rand(-60, 60);

      star.style.setProperty("--dx", dx + "px");
      star.style.setProperty("--dy", dy + "px");

      star.style.animationDuration = duration + "s";
      star.style.animationDirection = Math.random() > 0.5 ? "alternate" : "alternate-reverse";
        star.style.opacity = layer.blur === 0 ? 0.6 : layer.blur === 1 ? 0.4 : 0.25;


      zone.appendChild(star);
    }
  });

  function rand(min, max) {
    return Math.random() * (max - min) + min;
  }
</script>

</body>
</html>
